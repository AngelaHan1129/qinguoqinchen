åŸºæ–¼ä½ æä¾›çš„ README æ–‡æª”ï¼Œæˆ‘æœƒç‚ºä½ çš„ã€Œä¾µåœ‹ä¾µåŸ AI æ»²é€æ¸¬è©¦ç³»çµ±ã€é€²è¡Œå°ˆæ¥­çš„ä¿®æ”¹å’Œå®Œå–„ã€‚ä»¥ä¸‹æ˜¯é‡å°ä½ å°ˆæ¡ˆçš„å„ªåŒ–ç‰ˆæœ¬ï¼š


# ğŸ›¡ï¸ ä¾µåœ‹ä¾µåŸ AI æ»²é€æ¸¬è©¦ç³»çµ±

[![Version](https://img.shields.io/badge/version-2.0.0-blue.svg)](https://github.com/AngelaHan1129/qinguoqinchen)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)
[![Node.js](https://img.shields.io/badge/node.js-%3E%3D18.0.0-brightgreen.svg)](https://nodejs.org/)
[![Python](https://img.shields.io/badge/python-%3E%3D3.11-blue.svg)](https://python.org/)
[![Vue.js](https://img.shields.io/badge/vue.js-3.4.0-green.svg)](https://vuejs.org/)
[![NestJS](https://img.shields.io/badge/nestjs-11.0.1-red.svg)](https://nestjs.com/)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.104.1-teal.svg)](https://fastapi.tiangolo.com/)
[![Docker](https://img.shields.io/badge/docker-ready-blue.svg)](https://docker.com/)
[![RAG](https://img.shields.io/badge/RAG-enabled-orange.svg)](#)

**ğŸ¯ å°ˆç‚º eKYC (é›»å­èº«ä»½é©—è­‰) å®‰å…¨æ¸¬è©¦è¨­è¨ˆçš„ä¼æ¥­ç´š AI ç´…éšŠæ»²é€æ¸¬è©¦ç³»çµ±**  
> **æ•´åˆ RAG æª¢ç´¢å¢å¼·ç”ŸæˆæŠ€è¡“ + å¤šæ¨¡æ…‹ AI æ”»æ“Šå¼•æ“ + å¯¦æ™‚å¨è„…åˆ†æ**

## ğŸ“‹ ç›®éŒ„

- [ğŸ¯ ç³»çµ±æ¦‚è¿°](#-ç³»çµ±æ¦‚è¿°)
- [ğŸ—ï¸ æ¶æ§‹è¨­è¨ˆ](#ï¸-æ¶æ§‹è¨­è¨ˆ)
- [ğŸš€ æ ¸å¿ƒåŠŸèƒ½](#-æ ¸å¿ƒåŠŸèƒ½)
- [âš”ï¸ æ”»æ“Šå‘é‡](#ï¸-æ”»æ“Šå‘é‡)
- [ğŸ› ï¸ æŠ€è¡“æ£§](#ï¸-æŠ€è¡“æ£§)
- [âš¡ å¿«é€Ÿé–‹å§‹](#-å¿«é€Ÿé–‹å§‹)
- [ğŸ“ å°ˆæ¡ˆçµæ§‹](#-å°ˆæ¡ˆçµæ§‹)
- [ğŸ”§ é–‹ç™¼æŒ‡å—](#-é–‹ç™¼æŒ‡å—)
- [ğŸ“š API æ–‡æª”](#-api-æ–‡æª”)
- [ğŸ³ éƒ¨ç½²æŒ‡å—](#-éƒ¨ç½²æŒ‡å—)
- [ğŸ§ª æ¸¬è©¦æŒ‡å—](#-æ¸¬è©¦æŒ‡å—)
- [ğŸ”§ æ•…éšœæ’é™¤](#-æ•…éšœæ’é™¤)
- [ğŸ¤ è²¢ç»æŒ‡å—](#-è²¢ç»æŒ‡å—)

## ğŸ¯ ç³»çµ±æ¦‚è¿°

**ä¾µåœ‹ä¾µåŸ AI æ»²é€æ¸¬è©¦ç³»çµ±**æ˜¯ä¸€å€‹å‰µæ–°çš„ä¼æ¥­ç´š AI ç´…éšŠå·¥å…·ï¼Œå°ˆç‚º **2025 InnoServe å‰µæ–°ä¼ºæœå™¨å¤§è³½**è¨­è¨ˆã€‚ç³»çµ±æ•´åˆäº†æœ€æ–°çš„ç”Ÿæˆå¼ AI æŠ€è¡“ã€RAG æª¢ç´¢å¢å¼·ç”Ÿæˆå’Œå…ˆé€²çš„æ”»æ“Šå‘é‡æ¨¡æ“¬ï¼Œæä¾›å…¨æ–¹ä½çš„ eKYC å®‰å…¨è©•ä¼°è§£æ±ºæ–¹æ¡ˆã€‚

### ğŸŒŸ ç³»çµ±ç‰¹è‰²

- **ğŸ¤– å¤š AI å¼•æ“æ•´åˆ**: Gemini AI + Grok AI + Vertex AI Agent
- **ğŸ” RAG æ™ºèƒ½å•ç­”**: åŸºæ–¼å‘é‡è³‡æ–™åº«çš„æ™ºèƒ½æª¢ç´¢èˆ‡åˆ†æ
- **ğŸ­ Deepfake æ”»æ“Šæ¨¡æ“¬**: StyleGAN3ã€SimSwapã€DALLÂ·E ç­‰å…ˆé€²æŠ€è¡“
- **ğŸ“Š é‡åŒ–å®‰å…¨è©•ä¼°**: APCERã€BPCERã€ACERã€EER å°ˆæ¥­æŒ‡æ¨™
- **ğŸ”’ ä¼æ¥­ç´šæ¶æ§‹**: æ¨¡çµ„åŒ–è¨­è¨ˆ + å·¥å» æ¨¡å¼ + æœå‹™å°å‘
- **ğŸ“± RESTful API**: Swagger è‡ªå‹•åŒ–æ–‡æª” + å®Œæ•´æ¸¬è©¦æ”¯æ´
- **ğŸ³ å®¹å™¨åŒ–éƒ¨ç½²**: Docker + Docker Compose ä¸€éµéƒ¨ç½²

## ğŸ—ï¸ æ¶æ§‹è¨­è¨ˆ

```mermaid
graph TB
    subgraph "API å±¤ (Backend)"
        A[NestJS + Express]
        B[RouteManager]
        C[ServiceFactory]
        D[Swagger API æ–‡æª”]
    end
    
    subgraph "æœå‹™å±¤ (Services)"
        E[RAG Service<br/>Gemini AI æ•´åˆ]
        F[Attack Service<br/>5ç¨®æ”»æ“Šå‘é‡]
        G[Health Service<br/>ç³»çµ±ç›£æ§]
        H[Database Service<br/>å¤šè³‡æ–™åº«æ”¯æ´]
    end
    
    subgraph "AI å¼•æ“å±¤"
        I[Gemini AI<br/>æ™ºèƒ½ç”Ÿæˆ]
        J[Grok AI<br/>å®‰å…¨åˆ†æ]
        K[Vertex AI Agent<br/>å°è©±å¼AI]
    end
    
    subgraph "è³‡æ–™å±¤ (Database)"
        L[PostgreSQL + pgvector<br/>å‘é‡è³‡æ–™åº«]
        M[Neo4j<br/>çŸ¥è­˜åœ–è­œ]
        N[Redis<br/>å¿«å–ç³»çµ±]
    end
    
    A --> B
    B --> C
    C --> E
    C --> F
    C --> G
    C --> H
    E --> I
    E --> L
    F --> I
    F --> J
    G --> K
    H --> L
    H --> M
    H --> N
```

## ğŸš€ æ ¸å¿ƒåŠŸèƒ½

### ğŸ® å¾Œç«¯æ ¸å¿ƒæ¨¡çµ„

| åŠŸèƒ½æ¨¡çµ„ | æè¿° | å¯¦ä½œç‹€æ…‹ |
|---------|------|---------|
| **ğŸ¤– å¤š AI å¼•æ“** | Gemini + Grok + Vertex AI æ•´åˆ | âœ… å®Œæˆ |
| **ğŸ” RAG ç³»çµ±** | å‘é‡æª¢ç´¢ + æ™ºèƒ½å•ç­” + æ–‡æª”ç®¡ç† | âœ… å®Œæˆ |
| **âš”ï¸ æ”»æ“Šå¼•æ“** | 5ç¨® AI æ”»æ“Šå‘é‡ + çµ„åˆæ”»æ“Š | âœ… å®Œæˆ |
| **ğŸ“Š ç³»çµ±ç›£æ§** | å¥åº·æª¢æŸ¥ + æ•ˆèƒ½çµ±è¨ˆ + æ—¥èªŒè¿½è¹¤ | âœ… å®Œæˆ |
| **ğŸ“š API æ–‡æª”** | Swagger UI + è‡ªå‹•åŒ–æ¸¬è©¦ | âœ… å®Œæˆ |
| **ğŸ”§ ç®¡ç†åŠŸèƒ½** | ç³»çµ±é…ç½® + ç‰ˆæœ¬è³‡è¨Š + çµ±è¨ˆåˆ†æ | âœ… å®Œæˆ |

### ğŸ¯ RAG æ™ºèƒ½å•ç­”ç³»çµ±

| åŠŸèƒ½ | æè¿° | API ç«¯é» |
|------|------|---------|
| **æ™ºèƒ½å•ç­”** | åŸºæ–¼å‘é‡æª¢ç´¢çš„ AI å•ç­” | `POST /rag/ask` |
| **æ–‡æª”æ”å–** | æ–‡å­—ã€æª”æ¡ˆã€æ³•å¾‹æ–‡ä»¶æ”å– | `POST /rag/ingest/*` |
| **èªç¾©æœå°‹** | å‘é‡ç›¸ä¼¼åº¦æ–‡æª”æœå°‹ | `POST /rag/search` |
| **æ–‡æª”ç®¡ç†** | æŸ¥çœ‹ã€åˆªé™¤ã€æ‰¹æ¬¡è™•ç† | `GET/DELETE /rag/document/*` |
| **ç³»çµ±çµ±è¨ˆ** | RAG ç³»çµ±é‹è¡Œç‹€æ…‹ | `GET /rag/stats` |

## âš”ï¸ æ”»æ“Šå‘é‡

### ğŸ¯ æ ¸å¿ƒæ”»æ“Šå‘é‡

| å‘é‡ID | AI æ¨¡å‹ | æ”»æ“Šå ´æ™¯ | é›£åº¦ç­‰ç´š | æˆåŠŸç‡ | å¯¦ä½œç‹€æ…‹ |
|-------|---------|----------|----------|--------|----------|
| **A1** | StyleGAN3 | å½é€ çœŸäººè‡ªæ‹ | ğŸŸ¡ MEDIUM | 78% | âœ… å·²å¯¦ä½œ |
| **A2** | StableDiffusion | è¢å¹•ç¿»æ‹æ”»æ“Š | ğŸŸ¢ LOW | 65% | âœ… å·²å¯¦ä½œ |
| **A3** | SimSwap | å³æ™‚æ›è‡‰æ”»æ“Š | ğŸ”´ HIGH | 89% | âœ… å·²å¯¦ä½œ |
| **A4** | Diffusion+GAN | å½é€ è­·ç…§æ”»æ“Š | ğŸŸ¡ MEDIUM | 73% | âœ… å·²å¯¦ä½œ |
| **A5** | DALLÂ·E | ç”Ÿæˆå‡è­‰ä»¶ | ğŸŸ¢ EASY | 82% | âœ… å·²å¯¦ä½œ |

### ğŸ¯ æ¨è–¦æ”»æ“Šçµ„åˆ

| çµ„åˆåç¨± | å‘é‡çµ„åˆ | æè¿° | é ä¼°æˆåŠŸç‡ | å¨è„…ç­‰ç´š |
|---------|----------|------|------------|----------|
| **ğŸ’ é‘½çŸ³çµ„åˆ** | A3 + A4 | å³æ™‚æ›è‡‰ + è­‰ä»¶å½é€  | **94%** | ğŸ”´ CRITICAL |
| **ğŸ¥‡ é»ƒé‡‘çµ„åˆ** | A1 + A5 | å‡è‡ªæ‹ + ç”Ÿæˆè­‰ä»¶ | **83%** | ğŸŸ  HIGH |
| **âš¡ é–ƒé›»çµ„åˆ** | A2 + A3 | ç¿»æ‹æ”»æ“Š + å³æ™‚æ›è‡‰ | **92%** | ğŸ”´ CRITICAL |

## ğŸ› ï¸ æŠ€è¡“æ£§

### å¾Œç«¯æ ¸å¿ƒæŠ€è¡“

```json
{
  "æ¡†æ¶": "NestJS 11.0.1 + Express 4.19.2",
  "èªè¨€": "JavaScript ES2020 + Node.js 18+",
  "è¨­è¨ˆæ¨¡å¼": {
    "æ¶æ§‹": "åˆ†å±¤æ¶æ§‹ + æœå‹™å°å‘",
    "æ¨¡å¼": "å·¥å» æ¨¡å¼ + ç­–ç•¥æ¨¡å¼",
    "ç®¡ç†": "ä¾è³´æ³¨å…¥ + æ§åˆ¶åè½‰"
  },
  "AIå¼•æ“": {
    "gemini": "Google Gemini 2.0 Flash API",
    "grok": "X.AI Grok API",
    "vertex": "Google Vertex AI Agent"
  },
  "æ–‡æª”": "Swagger/OpenAPI 3.0 + è‡ªå‹•åŒ–ç”Ÿæˆ",
  "æ¸¬è©¦": "Jest 29.7+ + Supertest"
}
```

### è³‡æ–™åº«æŠ€è¡“

```json
{
  "ä¸»è³‡æ–™åº«": "PostgreSQL 15+ with pgvector",
  "å‘é‡æœå°‹": "pgvector æ“´å±• (1024ç¶­)",
  "åœ–è³‡æ–™åº«": "Neo4j 5.15 with APOC",
  "å¿«å–ç³»çµ±": "Redis 7.0+",
  "ORM": "åŸç”Ÿ SQL + é€£æ¥æ± ç®¡ç†"
}
```

### AI èˆ‡æ©Ÿå™¨å­¸ç¿’

```json
{
  "RAGç³»çµ±": "æª¢ç´¢å¢å¼·ç”Ÿæˆ (Retrieval-Augmented Generation)",
  "å‘é‡æ¨¡å‹": "intfloat/multilingual-e5-large",
  "å‘é‡ç¶­åº¦": 1024,
  "ç›¸ä¼¼åº¦ç®—æ³•": "é¤˜å¼¦ç›¸ä¼¼åº¦ (Cosine Similarity)",
  "èªè¨€æ”¯æ´": "ç¹é«”ä¸­æ–‡ + å¤šèªè¨€"
}
```

## âš¡ å¿«é€Ÿé–‹å§‹

### ğŸ’» ç’°å¢ƒéœ€æ±‚

```bash
# åŸºæœ¬ç’°å¢ƒ
Node.js >= 18.0.0
npm >= 9.0.0 (å»ºè­°ä½¿ç”¨ pnpm >= 8.0.0)
Git >= 2.30.0

# å¯é¸ç’°å¢ƒ (å®Œæ•´åŠŸèƒ½)
Docker >= 20.10.0
Docker Compose >= 2.0.0
PostgreSQL >= 15.0 (with pgvector)
Redis >= 7.0
```

### ğŸš€ å¿«é€Ÿå•Ÿå‹•

```bash
# 1. å…‹éš†å°ˆæ¡ˆ
git clone https://github.com/AngelaHan1129/qinguoqinchen.git
cd qinguoqinchen/backend

# 2. å®‰è£ä¾è³´
pnpm install

# 3. è¨­å®šç’°å¢ƒè®Šæ•¸ (åŸºæœ¬é…ç½®)
cat > .env << EOF
NODE_ENV=development
PORT=7939
GEMINI_API_KEY=your_gemini_api_key_here
XAI_API_KEY=your_grok_api_key_here
LOG_LEVEL=info
EOF

# 4. å•Ÿå‹•ç³»çµ±
pnpm start:dev

# 5. é©—è­‰å•Ÿå‹•
curl http://localhost:7939/health
```

### ğŸ” æœå‹™ç«¯é»

| æœå‹™ | URL | æè¿° | ç‹€æ…‹ |
|------|-----|------|-----|
| **ğŸ  ç³»çµ±é¦–é ** | http://localhost:7939 | ç³»çµ±æ¦‚è¦½ | âœ… é‹è¡Œä¸­ |
| **ğŸ“š API æ–‡æª”** | http://localhost:7939/api/docs | Swagger UI æ–‡æª” | âœ… å¯ç”¨ |
| **ğŸ’š å¥åº·æª¢æŸ¥** | http://localhost:7939/health | ç³»çµ±å¥åº·ç‹€æ…‹ | âœ… ç›£æ§ä¸­ |
| **âš”ï¸ æ”»æ“Šå‘é‡** | http://localhost:7939/ai-attack/vectors | æ”»æ“Šå‘é‡åˆ—è¡¨ | âœ… å°±ç·’ |
| **ğŸ¤– RAG å•ç­”** | http://localhost:7939/rag/ask | æ™ºèƒ½å•ç­”ç³»çµ± | âœ… å°±ç·’ |

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```text
qinguoqinchen/backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.js                 # ğŸš€ æ‡‰ç”¨ç¨‹å¼å…¥å£ (NestJS + Express)
â”‚   â”œâ”€â”€ config/                 # âš™ï¸ é…ç½®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ swagger.config.js   # ğŸ“š Swagger/OpenAPI é…ç½®
â”‚   â”‚   â””â”€â”€ database.config.js  # ğŸ—„ï¸ è³‡æ–™åº«é…ç½® (PostgreSQL/Neo4j/Redis)
â”‚   â”œâ”€â”€ services/               # ğŸ”§ æ¥­å‹™é‚è¼¯æœå‹™å±¤
â”‚   â”‚   â”œâ”€â”€ RAGService.js       # ğŸ§  RAG ç³»çµ± (Gemini AI æ•´åˆ)
â”‚   â”‚   â”œâ”€â”€ AttackService.js    # âš”ï¸ æ”»æ“Šå‘é‡æœå‹™
â”‚   â”‚   â”œâ”€â”€ HealthService.js    # ğŸ’š å¥åº·æª¢æŸ¥æœå‹™
â”‚   â”‚   â”œâ”€â”€ AppService.js       # ğŸ  æ‡‰ç”¨ç¨‹å¼æ ¸å¿ƒæœå‹™
â”‚   â”‚   â””â”€â”€ DatabaseService.js  # ğŸ—„ï¸ è³‡æ–™åº«ç®¡ç†æœå‹™
â”‚   â”œâ”€â”€ routes/                 # ğŸ›£ï¸ API è·¯ç”±å±¤
â”‚   â”‚   â”œâ”€â”€ index.js            # ğŸ¯ è·¯ç”±çµ±ä¸€è¨»å†Šç®¡ç†å™¨
â”‚   â”‚   â”œâ”€â”€ rag.routes.js       # ğŸ¤– RAG ç³»çµ±è·¯ç”± (9å€‹ç«¯é»)
â”‚   â”‚   â”œâ”€â”€ system.routes.js    # ğŸ  ç³»çµ±ç®¡ç†è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ ai.routes.js        # ğŸ§  AI å¼•æ“è·¯ç”±
â”‚   â”‚   â””â”€â”€ database.routes.js  # ğŸ—„ï¸ è³‡æ–™åº«æ“ä½œè·¯ç”±
â”‚   â”œâ”€â”€ utils/                  # ğŸ› ï¸ å·¥å…·èˆ‡è¼”åŠ©å‡½æ•¸
â”‚   â”‚   â”œâ”€â”€ logger.js           # ğŸ“ æ—¥èªŒç®¡ç†å·¥å…·
â”‚   â”‚   â”œâ”€â”€ errorHandler.js     # âŒ éŒ¯èª¤è™•ç†å·¥å…·
â”‚   â”‚   â””â”€â”€ validation.js       # âœ… è¼¸å…¥é©—è­‰å·¥å…·
â”‚   â”œâ”€â”€ middleware/             # ğŸ”’ ä¸­é–“ä»¶å±¤
â”‚   â”‚   â”œâ”€â”€ SecurityMiddleware.js   # ğŸ›¡ï¸ å®‰å…¨ä¸­é–“ä»¶
â”‚   â”‚   â””â”€â”€ PerformanceMiddleware.js # âš¡ æ•ˆèƒ½ç›£æ§ä¸­é–“ä»¶
â”‚   â””â”€â”€ factories/              # ğŸ­ å·¥å» æ¨¡å¼å¯¦ä½œ
â”‚       â””â”€â”€ ServiceFactory.js   # ğŸ”§ æœå‹™å·¥å»  (ä¾è³´æ³¨å…¥)
â”œâ”€â”€ sql/                        # ğŸ“ æ–°å¢ï¼šSQL åˆå§‹åŒ–æª”æ¡ˆç›®éŒ„
â”‚   â”œâ”€â”€ 001_init_extensions.sql  # pgvector æ“´å±•å®‰è£
â”‚   â”œâ”€â”€ 002_create_tables.sql    # è³‡æ–™è¡¨å»ºç«‹
â”‚   â””â”€â”€ 003_create_indexes.sql   # ç´¢å¼•å»ºç«‹
â”œâ”€â”€ uploads/                    # ğŸ“ æª”æ¡ˆä¸Šå‚³ç›®éŒ„
â”œâ”€â”€ logs/                       # ğŸ“Š ç³»çµ±æ—¥èªŒç›®éŒ„
â”œâ”€â”€ package.json               # ğŸ“¦ Node.js å°ˆæ¡ˆé…ç½®
â”œâ”€â”€ .env                       # ğŸ” ç’°å¢ƒè®Šæ•¸é…ç½®
â”œâ”€â”€ docker-compose.yml         # ğŸ³ Docker å®¹å™¨ç·¨æ’
â””â”€â”€ README.md                  # ğŸ“– å°ˆæ¡ˆèªªæ˜æ–‡æª”
```

### ğŸ¯ æ ¸å¿ƒæª”æ¡ˆèªªæ˜

#### **ğŸš€ æ‡‰ç”¨ç¨‹å¼å…¥å£ (`main.js`)**
- NestJS + Express æ··åˆæ¶æ§‹
- æœå‹™å·¥å» æ¨¡å¼åˆå§‹åŒ–
- è·¯ç”±çµ±ä¸€è¨»å†Šç®¡ç†
- å„ªé›…é—œé–‰è™•ç†

#### **ğŸ¤– RAG æœå‹™æ ¸å¿ƒ (`RAGService.js`)**
- Gemini AI æ•´åˆ
- å‘é‡æª¢ç´¢å¢å¼·ç”Ÿæˆ
- å…§å»ºçŸ¥è­˜åº«ç®¡ç†
- æ™ºèƒ½å•ç­”è™•ç†

#### **ğŸ“š Swagger é…ç½® (`swagger.config.js`)**
- OpenAPI 3.0 è¦æ ¼
- è‡ªå‹•åŒ– API æ–‡æª”
- äº’å‹•å¼æ¸¬è©¦ä»‹é¢
- å®Œæ•´çš„ schema å®šç¾©

#### **ğŸ¯ è·¯ç”±ç®¡ç†å™¨ (`routes/index.js`)**
- çµ±ä¸€è·¯ç”±è¨»å†Š
- ä¸­é–“ä»¶è¨­ç½®
- éŒ¯èª¤è™•ç†é…ç½®
- 404 è™•ç†ç­–ç•¥

## ğŸ”§ é–‹ç™¼æŒ‡å—

### ğŸ“‹ é–‹ç™¼æµç¨‹

```bash
# 1. é–‹ç™¼ç’°å¢ƒè¨­ç½®
pnpm install
cp .env.example .env
# ç·¨è¼¯ .env æª”æ¡ˆè¨­å®š API é‡‘é‘°

# 2. å•Ÿå‹•é–‹ç™¼æœå‹™å™¨
pnpm start:dev
# ç³»çµ±æœƒè‡ªå‹•é‡è¼‰ (nodemon)

# 3. é©—è­‰åŠŸèƒ½
curl http://localhost:7939/health
open http://localhost:7939/api/docs

# 4. åŸ·è¡Œæ¸¬è©¦
pnpm test
pnpm run test:watch

# 5. ç¨‹å¼ç¢¼æª¢æŸ¥
pnpm run lint
pnpm run format
```

### ğŸ§© æ·»åŠ æ–°åŠŸèƒ½

#### 1. æ–°å¢æœå‹™

```javascript
// src/services/NewService.js
class NewService {
  constructor(dependencies) {
    this.deps = dependencies;
  }
  
  async newMethod() {
    // æ¥­å‹™é‚è¼¯
  }
}

module.exports = NewService;
```

#### 2. è¨»å†Šåˆ°å·¥å» 

```javascript
// src/factories/ServiceFactory.js
static createNewService() {
  const NewService = require('../services/NewService');
  return new NewService(/* dependencies */);
}

static createAllServices() {
  return {
    // ... å…¶ä»–æœå‹™
    newService: this.createNewService()
  };
}
```

#### 3. æ·»åŠ è·¯ç”±

```javascript
// src/routes/new.routes.js
class NewRoutes {
  static register(app, services) {
    const { newService } = services;
    
    app.get('/new/endpoint', async (req, res) => {
      const result = await newService.newMethod();
      res.json({ success: true, result });
    });
  }
}

module.exports = NewRoutes;
```

#### 4. è¨»å†Šè·¯ç”±

```javascript
// src/routes/index.js
const NewRoutes = require('./new.routes');

static registerAllRoutes(app, services) {
  // ... å…¶ä»–è·¯ç”±
  NewRoutes.register(app, services);
}
```

### ğŸ¯ æœ€ä½³å¯¦è¸

#### **ğŸ—ï¸ æ¶æ§‹åŸå‰‡**
- **å–®ä¸€è·è²¬åŸå‰‡**: æ¯å€‹æœå‹™åªè² è²¬ä¸€å€‹åŠŸèƒ½é ˜åŸŸ
- **ä¾è³´æ³¨å…¥**: é€éå·¥å» æ¨¡å¼ç®¡ç†ä¾è³´é—œä¿‚
- **éŒ¯èª¤è™•ç†**: çµ±ä¸€çš„éŒ¯èª¤è™•ç†å’Œæ—¥èªŒè¨˜éŒ„
- **API è¨­è¨ˆ**: RESTful è¨­è¨ˆ + çµ±ä¸€å›æ‡‰æ ¼å¼

#### **ğŸ”’ å®‰å…¨è€ƒé‡**
- **è¼¸å…¥é©—è­‰**: æ‰€æœ‰ç”¨æˆ¶è¼¸å…¥éƒ½è¦é©—è­‰
- **éŒ¯èª¤éš±è—**: ç”Ÿç”¢ç’°å¢ƒä¸æš´éœ²æ•æ„ŸéŒ¯èª¤è³‡è¨Š
- **API é€Ÿç‡é™åˆ¶**: é˜²æ­¢ API æ¿«ç”¨
- **ç’°å¢ƒè®Šæ•¸**: æ•æ„Ÿè³‡è¨Šä½¿ç”¨ç’°å¢ƒè®Šæ•¸ç®¡ç†

## ğŸ“š API æ–‡æª”

### ğŸ”— ä¸»è¦ API ç«¯é»

#### **ğŸ  ç³»çµ±ç®¡ç† API**
```bash
GET  /                     # ç³»çµ±é¦–é è³‡è¨Š
GET  /health              # å¥åº·æª¢æŸ¥
GET  /system/info         # ç³»çµ±è©³ç´°è³‡è¨Š
GET  /admin/stats         # ç®¡ç†çµ±è¨ˆ
GET  /admin/version       # ç‰ˆæœ¬è³‡è¨Š
```

#### **âš”ï¸ æ”»æ“Šç³»çµ± API**
```bash
GET  /ai-attack/vectors              # å–å¾—æ‰€æœ‰æ”»æ“Šå‘é‡
POST /ai-attack/execute              # åŸ·è¡Œæ”»æ“Šæ¸¬è©¦
POST /ai-gemini/attack-vector        # Gemini AI æ”»æ“Šåˆ†æ
POST /ai-grok/security-analysis      # Grok AI å®‰å…¨åˆ†æ
POST /ai-agent/chat                  # Vertex AI å°è©±
```

#### **ğŸ¤– RAG ç³»çµ± API**
```bash
GET  /rag/stats                      # RAG ç³»çµ±çµ±è¨ˆ
POST /rag/ask                        # æ™ºèƒ½å•ç­”
POST /rag/ingest/text                # æ–‡å­—æ–‡æª”æ”å–
POST /rag/ingest/file                # æª”æ¡ˆä¸Šå‚³æ”å–
POST /rag/ingest/legal               # æ³•å¾‹æ–‡æª”æ”å–
POST /rag/search                     # èªç¾©æœå°‹
GET  /rag/document/:id               # å–å¾—æ–‡æª”è©³æƒ…
DELETE /rag/document/:id             # åˆªé™¤æ–‡æª”
POST /rag/batch/ingest               # æ‰¹æ¬¡æ”å– (æœ€å¤š50å€‹)
```

### ğŸ“– è©³ç´° API æ–‡æª”

å®Œæ•´çš„ API æ–‡æª”è«‹è¨ªå•ï¼š**http://localhost:7939/api/docs**

#### **ğŸ¯ RAG æ™ºèƒ½å•ç­”ç¯„ä¾‹**

```bash
# åŸºæœ¬å•ç­”
curl -X POST http://localhost:7939/rag/ask \
  -H "Content-Type: application/json" \
  -d '{
    "question": "eKYC ç³»çµ±çš„ä¸»è¦å®‰å…¨å¨è„…æœ‰å“ªäº›ï¼Ÿ",
    "filters": {
      "documentType": "security"
    }
  }'

# å›æ‡‰ç¯„ä¾‹
{
  "success": true,
  "answer": "åŸºæ–¼ç›¸é—œè³‡æ–™åˆ†æï¼ŒeKYC ç³»çµ±é¢è‡¨çš„ä¸»è¦å®‰å…¨å¨è„…åŒ…æ‹¬...",
  "sources": [
    {
      "id": "ekyc_security_001",
      "title": "eKYC ç³»çµ±å®‰å…¨å¨è„…åˆ†æ",
      "similarity": 0.95,
      "category": "security"
    }
  ],
  "confidence": 0.88,
  "mode": "RAG",
  "documentsUsed": 1,
  "timestamp": "2025-10-21T02:00:00.000Z"
}
```

#### **âš”ï¸ æ”»æ“ŠåŸ·è¡Œç¯„ä¾‹**

```bash
# åŸ·è¡Œå¤šå‘é‡æ”»æ“Š
curl -X POST http://localhost:7939/ai-attack/execute \
  -H "Content-Type: application/json" \
  -d '{
    "vectorIds": ["A3", "A4"],
    "intensity": "high"
  }'

# å›æ‡‰ç¯„ä¾‹
{
  "success": true,
  "testId": "QQC_ATK_1729454567890_A1B2C3",
  "attackResults": {
    "vectors": ["A3", "A4"],
    "intensity": "high",
    "results": [
      {
        "vectorId": "A3",
        "success": true,
        "confidence": 0.89,
        "bypassScore": 0.92,
        "processingTime": 2341
      }
    ],
    "summary": {
      "totalAttacks": 2,
      "successfulAttacks": 1,
      "successRate": "50%",
      "threatLevel": "HIGH"
    }
  }
}
```

## ğŸ³ éƒ¨ç½²æŒ‡å—

### ğŸ—ï¸ Docker Compose éƒ¨ç½²

```yaml
# docker-compose.yml
version: '3.8'

services:
  # å¾Œç«¯æœå‹™
  backend:
    build:
      context: .
      dockerfile: Dockerfile
    ports:
      - "7939:7939"
    environment:
      - NODE_ENV=production
      - DATABASE_URL=postgresql://admin:qinguoqinchen123@postgres:5432/qinguoqinchen_ai
      - NEO4J_URI=bolt://neo4j:7687
      - REDIS_URL=redis://redis:6379
      - GEMINI_API_KEY=${GEMINI_API_KEY}
      - XAI_API_KEY=${XAI_API_KEY}
    depends_on:
      - postgres
      - neo4j  
      - redis
    volumes:
      - ./logs:/app/logs
      - ./uploads:/app/uploads

  # PostgreSQL è³‡æ–™åº«
  postgres:
    image: pgvector/pgvector:pg15
    ports:
      - "5847:5432"
    environment:
      POSTGRES_DB: qinguoqinchen_ai
      POSTGRES_USER: admin
      POSTGRES_PASSWORD: qinguoqinchen123
    volumes:
      - postgres_data:/var/lib/postgresql/data

  # Neo4j åœ–è³‡æ–™åº«
  neo4j:
    image: neo4j:5.15-community
    ports:
      - "7474:7474"
      - "7687:7687"
    environment:
      NEO4J_AUTH: neo4j/qinguoqinchen123
      NEO4J_PLUGINS: '["apoc", "graph-data-science"]'
    volumes:
      - neo4j_data:/data

  # Redis å¿«å–
  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
    command: redis-server --requirepass qinguoqinchen123
    volumes:
      - redis_data:/data

volumes:
  postgres_data:
  neo4j_data:
  redis_data:
```

### ğŸš€ éƒ¨ç½²æ­¥é©Ÿ

```bash
# 1. æº–å‚™ç’°å¢ƒ
git clone https://github.com/AngelaHan1129/qinguoqinchen.git
cd qinguoqinchen/backend

# 2. è¨­å®šç’°å¢ƒè®Šæ•¸
cp .env.example .env.production
# ç·¨è¼¯ .env.production è¨­å®šçœŸå¯¦çš„ API é‡‘é‘°

# 3. å•Ÿå‹•æœå‹™
docker-compose up -d --build

# 4. é©—è­‰éƒ¨ç½²
docker-compose ps
curl http://localhost:7939/health

# 5. æŸ¥çœ‹æ—¥èªŒ
docker-compose logs -f backend
```

## ğŸ§ª æ¸¬è©¦æŒ‡å—

### ğŸ”¬ ç³»çµ±æ¸¬è©¦

```bash
# å¥åº·æª¢æŸ¥æ¸¬è©¦
curl http://localhost:7939/health

# æ”»æ“Šå‘é‡æ¸¬è©¦
curl http://localhost:7939/ai-attack/vectors

# RAG ç³»çµ±æ¸¬è©¦
curl -X POST http://localhost:7939/rag/ask \
  -H "Content-Type: application/json" \
  -d '{"question":"ä»€éº¼æ˜¯ Deepfake æ”»æ“Šï¼Ÿ"}'

# æ–‡æª”æ”å–æ¸¬è©¦
curl -X POST http://localhost:7939/rag/ingest/text \
  -H "Content-Type: application/json" \
  -d '{
    "text": "eKYC ç³»çµ±æ˜¯é›»å­èº«ä»½é©—è­‰çš„é‡è¦æŠ€è¡“...",
    "metadata": {"title": "eKYC æŠ€è¡“èªªæ˜"}
  }'
```

### ğŸ“Š æ•ˆèƒ½æ¸¬è©¦

```bash
# ä½µç™¼æ”»æ“Šæ¸¬è©¦
for i in {1..10}; do
  curl -X POST http://localhost:7939/ai-attack/execute \
    -H "Content-Type: application/json" \
    -d '{"vectorIds":["A1"],"intensity":"medium"}' &
done

# RAG å•ç­”å£“åŠ›æ¸¬è©¦
for i in {1..20}; do
  curl -X POST http://localhost:7939/rag/ask \
    -H "Content-Type: application/json" \
    -d '{"question":"eKYC å®‰å…¨å¨è„…"}' &
done
```

## ğŸ”§ æ•…éšœæ’é™¤

### â“ å¸¸è¦‹å•é¡Œ

#### **1. ç³»çµ±å•Ÿå‹•å¤±æ•—**
```bash
# æª¢æŸ¥ Node.js ç‰ˆæœ¬
node --version  # éœ€è¦ >= 18.0.0

# æ¸…ç†ä¸¦é‡æ–°å®‰è£
rm -rf node_modules package-lock.json
pnpm install

# æª¢æŸ¥ç’°å¢ƒè®Šæ•¸
echo $GEMINI_API_KEY
echo $XAI_API_KEY
```

#### **2. RAG å•ç­”å›å‚³æ¨¡æ“¬çµæœ**
```bash
# ç¢ºèª Gemini API é‡‘é‘°è¨­ç½®
grep GEMINI_API_KEY .env

# æ¸¬è©¦ API é€£æ¥
curl -H "Authorization: Bearer $GEMINI_API_KEY" \
  https://generativelanguage.googleapis.com/v1/models
```

#### **3. è³‡æ–™åº«é€£æ¥å•é¡Œ**
```bash
# æª¢æŸ¥è³‡æ–™åº«ç‹€æ…‹
docker-compose ps

# é‡æ–°å•Ÿå‹•è³‡æ–™åº«
docker-compose restart postgres neo4j redis

# æª¢æŸ¥é€£æ¥
psql -h localhost -p 5847 -U admin -d qinguoqinchen_ai
```

#### **4. æ”»æ“Šå‘é‡åŸ·è¡Œç•°å¸¸**
```bash
# æª¢æŸ¥æœå‹™ç‹€æ…‹
curl http://localhost:7939/health

# æŸ¥çœ‹è©³ç´°æ—¥èªŒ
docker-compose logs backend | grep ERROR

# é‡æ–°å•Ÿå‹•å¾Œç«¯æœå‹™
docker-compose restart backend
```

### ğŸ“ æ—¥èªŒåˆ†æ

```bash
# æŸ¥çœ‹ç³»çµ±æ—¥èªŒ
tail -f logs/system.log

# æŸ¥çœ‹éŒ¯èª¤æ—¥èªŒ
tail -f logs/error.log

# æŸ¥çœ‹ RAG æ“ä½œæ—¥èªŒ
docker-compose logs backend | grep "RAG"

# æŸ¥çœ‹æ”»æ“ŠåŸ·è¡Œæ—¥èªŒ
docker-compose logs backend | grep "æ”»æ“Š"
```

### ğŸš¨ ç›£æ§æŒ‡æ¨™

```bash
# ç³»çµ±å¥åº·ç‹€æ…‹
curl http://localhost:7939/health

# RAG ç³»çµ±çµ±è¨ˆ
curl http://localhost:7939/rag/stats

# ç®¡ç†çµ±è¨ˆè³‡è¨Š
curl http://localhost:7939/admin/stats

# è¨˜æ†¶é«”ä½¿ç”¨æƒ…æ³
curl http://localhost:7939/system/info
```

## ğŸ¤ è²¢ç»æŒ‡å—

### ğŸŒŸ å¦‚ä½•è²¢ç»

1. **Fork** æ­¤å°ˆæ¡ˆ
2. **å»ºç«‹åŠŸèƒ½åˆ†æ”¯** (`git checkout -b feature/AmazingFeature`)
3. **æäº¤è®Šæ›´** (`git commit -m 'æ–°å¢æŸå€‹å²å®³çš„åŠŸèƒ½'`)
4. **æ¨é€åˆ†æ”¯** (`git push origin feature/AmazingFeature`)
5. **é–‹å•Ÿ Pull Request**

### ğŸ“‹ é–‹ç™¼è¦ç¯„

- **æäº¤è¨Šæ¯**: ä½¿ç”¨ä¸­æ–‡ï¼Œæ ¼å¼ç‚º `é¡å‹: ç°¡è¦æè¿°`
- **ç¨‹å¼ç¢¼é¢¨æ ¼**: éµå¾ª ESLint å’Œ Prettier é…ç½®
- **æ¸¬è©¦è¦†è“‹ç‡**: æ–°åŠŸèƒ½éœ€é”åˆ° 80% ä»¥ä¸Šè¦†è“‹ç‡
- **æ–‡æª”æ›´æ–°**: æ–°åŠŸèƒ½éœ€åŒæ­¥æ›´æ–° README å’Œ API æ–‡æª”

### ğŸ› å•é¡Œå›å ±

è«‹ä½¿ç”¨ [GitHub Issues](https://github.com/AngelaHan1129/qinguoqinchen/issues) å›å ±å•é¡Œï¼š

- è©³ç´°çš„å•é¡Œæè¿°
- é‡ç¾æ­¥é©Ÿ
- æœŸæœ›è¡Œç‚º
- ç³»çµ±ç’°å¢ƒè³‡è¨Š
- ç›¸é—œæˆªåœ–æˆ–æ—¥èªŒ

## ğŸ“ è¯çµ¡è³‡è¨Š

- **ğŸ« é–‹ç™¼åœ˜éšŠ**: åœ‹ç«‹è‡ºä¸­ç§‘æŠ€å¤§å­¸ è³‡è¨Šç®¡ç†ç³»
- **ğŸ† ç«¶è³½é …ç›®**: 2025 InnoServe å¤§å°ˆæ ¡é™¢è³‡è¨Šæ‡‰ç”¨æœå‹™å‰µæ–°ç«¶è³½
- **ğŸŒ å°ˆæ¡ˆé¦–é **: [GitHub Repository](https://github.com/AngelaHan1129/qinguoqinchen)
- **ğŸ› å•é¡Œå›å ±**: [GitHub Issues](https://github.com/AngelaHan1129/qinguoqinchen/issues)
- **ğŸ“§ è¯çµ¡ä¿¡ç®±**: qinguoqinchen2025@gmail.com

## ğŸ“„ æˆæ¬Šæ¢æ¬¾

æœ¬å°ˆæ¡ˆæ¡ç”¨ MIT æˆæ¬Šæ¢æ¬¾ã€‚è©³è¦‹ [LICENSE](LICENSE) æª”æ¡ˆã€‚

***

<div align="center">
  <h3>ğŸ›¡ï¸ ç‚ºæ›´å®‰å…¨çš„æ•¸ä½èº«ä»½é©—è­‰è€ŒåŠªåŠ›</h3>
  <p><strong>ä¾µåœ‹ä¾µåŸ AI å®‰å…¨åœ˜éšŠ</strong> Â© 2025</p>
  <p>ğŸ† <em>2025 InnoServe å‰µæ–°ä¼ºæœå™¨å¤§è³½åƒè³½ä½œå“</em></p>
  <p>ğŸ¯ <em>å°ˆæ¥­çš„ eKYC å®‰å…¨æ¸¬è©¦è§£æ±ºæ–¹æ¡ˆ</em></p>
  
  ![GitHub Stars](https://img.shields.io/github/stars/AngelaHan1129/qinguohttps://github.com/AngelaHan1129/qingu.shields.io/github/forks/AngelaHan1.com/AngelaHan1129/qinguoqinio/github/issues/AngelaHan1129/qinguhttps://github.com/AngelaHan1129/qingus.io/github/license/AngelaHan1129/qinguHan1129/qinguoqinchen/blob/main/ç”¨ä¾µåœ‹ä¾µåŸ) **AI æ»²é€æ¸¬è©¦ç³»çµ±ï¼Œé«”é©—æœ€å…ˆé€²çš„ eKYC å®‰å…¨è©•ä¼°æŠ€è¡“ï¼**


  # dockeré€£ç·šåˆ°pgvectoæ“ä½œè³‡æ–™åº«
  ```bash
   docker exec -it cbecf761035a psql -U admin -d qinguoqinchen_ai
  ```

# ä½¿ç”¨æ­¥é©Ÿ
1. åŸ·è¡Œæ¸¬è©¦
æ ¹æ“šæ‚¨çš„å¾Œç«¯å°ˆæ¡ˆçµæ§‹ï¼ŒåŸ·è¡Œä¸åŒé¡å‹çš„æ¸¬è©¦ï¼š

bash
# åŸ·è¡Œæ‰€æœ‰æ¸¬è©¦
npx playwright test

# åŸ·è¡Œç‰¹å®šå°ˆæ¡ˆ
npx playwright test --project=unit
npx playwright test --project=e2e

# åŸ·è¡Œç‰¹å®šæ¸¬è©¦æª”æ¡ˆ
npx playwright test tests/api/rag.routes.spec.js
2. ç”Ÿæˆ Allure å ±å‘Š
æ¸¬è©¦åŸ·è¡Œå®Œæˆå¾Œï¼Œçµæœæª”æ¡ˆæœƒç”Ÿæˆåœ¨ allure-results ç›®éŒ„ä¸­ ã€‚â€‹

å®‰è£ Allure å‘½ä»¤åˆ—å·¥å…·ï¼š

```bash
npm install -g allure-commandline
```
ç”Ÿæˆä¸¦é–‹å•Ÿå ±å‘Šï¼š

```bash
# ç”Ÿæˆå ±å‘Š
allure generate allure-results -o allure-report

# é–‹å•Ÿå ±å‘Š
allure open allure-report
```
æˆ–è€…ä½¿ç”¨ä¸€è¡Œå‘½ä»¤ç›´æ¥é–‹å•Ÿï¼š

```bash
allure serve allure-results
```